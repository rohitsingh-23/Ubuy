<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>checkout</title>
    <script src="https://kit.fontawesome.com/7b89e00c20.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="cart.css">
    <link rel="stylesheet" href="Header.css">
    <link rel="icon" href="https://d3ulwu8fab47va.cloudfront.net/media/favicon/default/favicon.ico">
</head>
<body>
    <!-- header part start -->
    <div class="headerdiv">
        <div class="left">
            <ul>
                <li> <a href="Landing Page.html"> <img id="homelogo" id="homelogo" style="width: 70px;" src="https://d3ulwu8fab47va.cloudfront.net/skin/frontend/default/ubuycom-v1/images/header/logo-ubuy.jpg" alt="logo"/></a></li>
                <li class="active"> <span class="explores"><a href=""><span id="bold">Explore</span><i class="fas fa-angle-down"></i></a></span> 
                    <div class="explore-sub">
                        <ul>
                            <li class="hover-me"><a href="#"><i class="fas fa-tshirt"></i> Fashion $ Jwellery</a>
                                <div class="sub-menu-2">
                                    <ul>
                                        <li><a href="">Jeans </a></li>
                                        <li><a href="">Pants</a></li>
                                        <li><a href="/#">Skirt</a></li>
                                        <li><a href="">Swimwear</a></li>
                                        <li><a href="">Dresses </a></li>
                                        <li><a href="">Jumpsits</a></li>
                                        <li><a href="/#">Sleep & Lounge</a></li>
                                        <li><a href="">Lingerie</a></li>
                                    </ul>
                                </div>
                            </li>

                            <li class="hover-me"><a href="#"><i class="fas fa-plug"></i> Electronics</a>
                            <div class="sub-menu-2">
                                <ul>
                                    <li><a href="">Blender & mixers</a></li>
                                    <li><a href="/Laptop page.html">Laptops</a></li>
                                    <li><a href="/#">Juicers</a></li>
                                    <li><a href="">LED</a></li>
                                </ul>
                            </div>
                            </li>
                            <li class="hover-me"><a href="#"><i class="fas fa-mobile-alt"></i> Cell Phones & Accessories</a>
                                <div class="sub-menu-2">
                                    <ul>
                                        <li><a href="">smart watches</a></li>
                                        <li><a href="">mobile</a></li>
                                        <li><a href="/#">powerbamks</a></li>
                                        <li><a href="">memory card</a></li>
                                    </ul>
                                </div>
                            </li>
                            <li class="hover-me"><a href="#"><i class="fas fa-baby-carriage"></i> Baby & Toddler</a>
                                <div class="sub-menu-2">
                                    <ul>
                                        <li><a href="">Bouncer</a></li>
                                        <li><a href="">Swings</a></li>
                                        <li><a href="/#">Beach Toys</a></li>
                                        <li><a href="">Walkers</a></li>
                                    </ul>
                                </div>
                            </li>
                            <li class="hover-me"><a href="#"><i class="fas fa-chair"></i> Home Goods</a>
                                <div class="sub-menu-2">
                                    <ul>
                                        <li><a href="">Bedroom</a></li>
                                        <li><a href="">Living Room</a></li>
                                        <li><a href="/#">Home Office</a></li>
                                        <li><a href="">Clocks</a></li>
                                    </ul>
                                </div>
                            </li>
                            <li class="hover-me"><a href="#"><i class="fas fa-book"></i> Books</a>
                                <div class="sub-menu-2">
                                    <ul>
                                        <li><a href="">Architecture</a></li>
                                        <li><a href="">Drawing</a></li>
                                        <li><a href="/#">Fashion</a></li>
                                        <li><a href="">Bussiness Of Art</a></li>
                                    </ul>
                                </div>
                            </li>
                            <li class="hover-me"><a href="#"><i class="fas fa-car"></i> Automotive</a>
                                <div class="sub-menu-2">
                                    <ul>
                                        <li><a href="">Car Covers</a></li>
                                        <li><a href=""></a>Car Polishing Products</li>
                                        <li><a href="/#">Vacuume Cleaners</a></li>
                                        <li><a href="">Air Freshners</a></li>
                                    </ul>
                                </div>
                            </li>
                            <li class="hover-me"><a href="#"><i class="fas fa-cat"></i> Pet Supplies</a>
                                <div class="sub-menu-2">
                                    <ul>
                                        <li><a href="">Toys</a></li>
                                        <li><a href="">Groooming</a></li>
                                        <li><a href="/#">Carriers</a></li>
                                        <li><a href="">Feeding Suppies</a></li>
                                    </ul>
                                </div>
                            </li>

                        </ul>
                    </div>
                </li>
            </ul>
        </div>
        
        <div style="width: 500px;
         display: flex;
          justify-content: space-between;
           align-items: center; 
           padding: 5px;
            border-radius: 50px;
             background-color: #f7f7f9;"
              class="mid">
            <div id="bold" style="color: #c6c8ca;
             border-right: 1px solid #c6c8ca; ">All
                <i class="fas fa-angle-down"></i>
            </div> 
            <span>
                <input style="width: 300px;
                height: 35px;
                background-color: transparent;
                border: none;
                outline: none;"
                 type="text" 
                 placeholder="search here anything">
            </span>

            <span class="bold"> 
                <img style="width: 30px;" 
                src="https://d3ulwu8fab47va.cloudfront.net/skin/frontend/default/ubuycom-v1/images/countries-flag/new-us-icon.png.webp?v=1.0" 
                alt="uslogo">US<i class="fas fa-angle-down"></i> </span>
                <button style="background-color: #cccccc;
                 border-radius: 50%;
                  padding: 6px;
                   border: none;"><i class="fas fa-search"></i>
                </button>
        </div>

        <div class="right">

            <ul>
            <li><a href=""></a><i class="fas fa-boxes"></i>&nbsp;&nbsp; <span id="bold">India<i class="fas fa-angle-down"></i></span> </a></li>
            <li><a href=""></a><i class="fas fa-globe-americas"></i>&nbsp;&nbsp;English <span><i class="fas fa-angle-down"></i></span> </a></li>
            <li><a href=""></a><i class="fas fa-user-circle"></i>&nbsp;&nbsp; <span id="username">Account</span> <span><i class="fas fa-angle-down"></i></span> </a>
                <div class="acc">
                    <ul>
                        <li> <span id="bold"> <p>Welcome</p> </span> </li>
                        <li><a href="signIn.html"><i style="color: rgb(243, 133, 7);" class="fas fa-sign-in-alt"></i> sign</a></li>
                        <li><a href="createcontact.html"><i style="color: rgb(243, 133, 7);" class="fas fa-user-alt"></i> create an account</a></li>
                        <li><a href="my_orders.html"><i style="color: rgb(243, 133, 7);" class="fas fa-box"></i> your orders</a></li>
                        <li><a href="wishlist.html"><i style="color: rgb(243, 133, 7);" class="fas fa-heart"></i>wishlist</a></li>
                    </ul>
                </div>
            </li>
            <li><a href="">Cart</a>&nbsp;&nbsp;<i class="fas fa-shopping-cart"></i></li>
            </ul>

        </div>
    </div>



    <h1 id="sh1">Shopping Cart</h1>
    <div id="whole"></div>
</body>
</html>
<script>

    // var cartData =[
    //     {
    //         image:"https://rukminim1.flixcart.com/image/416/416/kp5sya80/screen-guard/tempered-glass/o/v/n/apple-macbook-air-m1-13-3-inch-lightwings-original-imag3gh5xftgbpg3.jpeg?q=70",
    //         name:"Apple",
    //         description:"2020 Apple MacBook Air Laptop: Apple M1 Chip (13‚Äù Retina Display, 8GB RAM, 256GB SSD Storage) - Space Gray",
    //         type:"Capacity: 256GB",
    //         // price:"92,373.00"
    //         price:92373.00
            
    //     },
    //      {
    //         image:"https://m.media-amazon.com/images/I/51jki5mG0VS._AC_SL1500_.jpg",
    //         name:"ASUS",
    //         description:"ASUS Optical Gaming Mouse - ROG Strix Impact II | Wireless Gaming Mouse with 16,000 DPI | 5 Programmable Buttons, RGB Lighting, 2.4 GHz, Long Battery Life, Lightweight, Ergonomic",
    //         type:"Style: Wireless",
    //         // price:"6,655.00"
    //         price:6655.00

    //      },
    //      {
    //          image:"https://m.media-amazon.com/images/I/71uo0h2d2XL._AC_SL1500_.jpg",
    //          name:"Snug",
    //          description:"Snug Play+ Kids Headphones with Volume Limiting for Toddlers (Boys/Girls) - Monster Trucks",
    //          type:"Color: Monster Trucks",
    //         //  price:"2,202.00"
    //         price:2202.00

    //      }
    // ] 

    // var cartItems=localStorage.setItem("cartItems",JSON.stringify(cartData))
    cartItems = JSON.parse(localStorage.getItem("cartItems")) 
    // console.log(cartItems)

    var body = document.querySelector("body")

    var wholeDiv = document.createElement("div")
    wholeDiv.setAttribute("id","wholeDiv")

    var mainDiv=document.createElement("div")
    mainDiv.setAttribute("id","main-div")
    mainDiv.setAttribute("class","main__div")


    wholeDiv.append(mainDiv)

    document.getElementById("whole").append(wholeDiv)
    showProduct(cartItems);

    function showProduct(cartItems){
        document.getElementById("main-div").innerHTML = ""

        cartItems.map(function(item,index){
            // console.log(item.price)

        var containerDiv = document.createElement("div")
        containerDiv.setAttribute("id","container")

        var imageDiv =document.createElement("div")
        imageDiv.setAttribute("id","imagediv")
        var imgDiv = document.createElement("img");
        imgDiv.setAttribute("id", "limage")
        if(index==0){
            imgDiv.setAttribute("id","lap")
        }
        imgDiv.setAttribute("src",item.image)
        
        var divBox = document.createElement("div")
        divBox.setAttribute("id","divbox")

        var name = document.createElement("h3")
        name.innerHTML=`<span class = "cartName">${item.name}</span>`

        var description = document.createElement("h2")
        description.setAttribute("id","h2Tag")
        description.textContent=item.description

        var type = document.createElement("h3");
        type.setAttribute("id", "ihelo")
        type.innerHTML= item.type
        
        var pDiv=document.createElement("div")
        pDiv.setAttribute("class","pDiv")

        var price = document.createElement("h3")
        price.setAttribute("class","price")
        price.innerHTML=`<span class="priceTag">INR${item.price}.00</span> `
        
        var label = document.createElement("label")
        label.setAttribute("for","input")
        label.textContent="Qty: "
        var input =document.createElement("input")
        input.setAttribute("type","number")
        input.setAttribute("class","qty-input")
        input.setAttribute("min","0")
        input.setAttribute("value","2")
        input.value = 1
        
        var br = document.createElement("br")
        var removebtn =document.createElement("button")
        removebtn.setAttribute("class","rbtn")
        removebtn.innerHTML=`<i class="far fa-trash-alt"></i> Remove`

        var sh1 = document.querySelector("#sh1")
        sh1.innerHTML=`Shoping cart <span class="shadow">(${index+1} items)</span> `

        imageDiv.append(imgDiv)
        pDiv.append(price,label,input,br,removebtn)
        divBox.append(name,description,type)
        containerDiv.append(imageDiv,divBox,pDiv)
        mainDiv.append(containerDiv)
 
        })

       

    }
    var container2 = document.createElement("div")
        container2.setAttribute("id","rightdiv")
        
        var h2 = document.createElement("h2")
        h2.setAttribute("id","h1_summary")
        h2.textContent="Order Summary"

        var allDiv = document.createElement("div")
        allDiv.setAttribute("id","allDiv")

        var h2_below_div =document.createElement("div")
        h2_below_div.setAttribute("id","h2_below_div")
// left div*************************************
        var left_div =document.createElement("div")
        left_div.setAttribute("id","left_div")

        var h41 = document.createElement("h4")
        h41.setAttribute("class","h4Tag")
        h41.textContent="Subtotal:"
        var h42 = document.createElement("h4")
        h42.setAttribute("class","h4Tag")
        h42.textContent="Shipping Fee:"

        var h43 = document.createElement("h4")
        h43.setAttribute("class","h4Tag")
        h43.textContent="Estimated Total:"
        left_div.append(h41,h42,h43)




// righ Div
        var right_div =document.createElement("div")
        right_div.setAttribute("id","right_div")

        var h4_1 = document.createElement("h4")
        h4_1.setAttribute("class","h4TagP h4p")
        h4_1.textContent="Subtotalfffff"
        var h4_2 = document.createElement("h4")
        h4_2.setAttribute("class","h4Tag h4p")
        h4_2.textContent="Calculating at checkout"

        var h4_3 = document.createElement("h4")
        h4_3.setAttribute("class","h4TagP")
        h4_3.setAttribute("id","h4TagP")
        h4_3.textContent="Estimated Totalfff:"

        var checkbtnDiv = document.createElement("div")
        checkbtnDiv.setAttribute("id","checkbtnDiv")

        var checkoutbtn =document.createElement("button")
        checkoutbtn.setAttribute("id","checkbtn");
        checkoutbtn.innerHTML=`<i class="fas fa-lock"></i> Proceed to Checkout`

        var divBottom = document.createElement("div")
        divBottom.setAttribute("id","divBottom")

        var pdiscount = document.createElement("h6")
        pdiscount.setAttribute("id","h6disc")
        pdiscount.textContent="Discount Codes"

        var p = document.createElement("p")
        p.setAttribute("id","pdisc")
        p.innerText="Enter your coupon code if you have one."

        var input = document.createElement("input")
        input.setAttribute("id","input")

        var bTag = document.createElement("br")

        var promobtn = document.createElement("button")
        promobtn.setAttribute("id","promobtn")
        promobtn.textContent="Apply Coupon"


    // appendins
    entireDives = document.createElement("div")
    entireDives.setAttribute("id","entireDives")
        divBottom.append(pdiscount,p,input,bTag,promobtn)
        right_div.append(h4_1,h4_2,h4_3)
        h2_below_div.append(left_div,right_div)
        checkbtnDiv.append(checkoutbtn)
        allDiv.append(h2_below_div,checkbtnDiv)
        entireDives.append(h2,allDiv,divBottom)
        container2.append(entireDives)
        wholeDiv.append(container2)
        var total = cartItems.reduce(function(acc,cv){
            return acc+Number(cv.price)
        },0)
        
        var show = document.getElementsByClassName("h4TagP")[0]
        var show1 = document.getElementsByClassName("h4TagP")[1]
        show.textContent=`INR${total}.00` 
        show1.textContent=`INR${total}.00`        
        // var show1 = document.querySelector("")





        var Apply = document.querySelector("#promobtn").addEventListener("click",function(){
            if(input.value== "masai30"){
                alert("Congrats you got '30% Discount' ")
                applyPromo()
            }else{
                alert("Coupon invalid")
            }
        })
            
        function applyPromo(){
               var pDiv =  document.getElementsByClassName("pDiv")
               var sum = 0;
               for(var i = 0; i<pDiv.length;i++){
                   var cartSingle = pDiv[i]
                   var cartPrice = cartSingle.getElementsByClassName("price")[0]
                   var price = cartPrice.innerText
                   var sliced = price.slice(3);
                   sum = sum+Number(sliced)
               }
               sum = sum - sum * (30/100);

               localStorage.setItem("total", JSON.stringify(sum))
               var show1 = document.getElementsByClassName("h4TagP")[1]
                show1.innerHTML=`INR${sum}.00`      
        }

        
// Remove btn

var removebtn = document.getElementsByClassName("rbtn")
var count = 0
for(var i = 0; i< removebtn.length;i++){
    var button =  removebtn[i]
    button.addEventListener("click",function(event){
        var buttonClicked = event.target
        var removebutton =  buttonClicked.parentElement
        var removeprice =  removebutton.firstChild.firstChild.innerText
       var priceslice = removeprice.slice(3)
       console.log(priceslice)
        count++
        var cartItems = JSON.parse(localStorage.getItem("cartItems"));
        var cartItems = cartItems.filter(function(event){
            // console.log(event)
            // console.log(event.price, priceslice)
            if(Number(event.price) !== Number(priceslice)){
                console.log("hello", event.price, priceslice)
                return event;
            }
        })
        
        
        localStorage.setItem("cartItems", JSON.stringify(cartItems))
        console.log(cartItems);
        showProduct(cartItems);
        var sh1 = document.querySelector("#sh1")
        sh1.innerHTML=`Shoping cart <span class="shadow">(${3-count} items)</span> `
        updateCartTotal();
    })
}
// quantity
var qty = document.getElementsByClassName("qty-input")
for(var i = 0; i < qty.length;i++){
    var input1 = qty[i]
    input1.addEventListener('change',qtyChanged)
}
        
        
        function qtyChanged(event){
            var input2 = event.target
            if(input2.value <= 0){
                input2.value = 1
            }
            updateCartTotal()
            // console.log(input.value)
        }

        function updateCartTotal(){
            var pDiv =  document.getElementsByClassName("pDiv")
            var qty = document.getElementsByClassName("qty-input")
               var sum = 0;
               for(var i = 0; i<pDiv.length;i++){
                   var cartSingle = pDiv[i]
                   var input = qty[i]
                   var num = input.value 
                   var cartPrice = cartSingle.getElementsByClassName("price")[0]
                   var price = cartPrice.innerText
                   var sliced = price.slice(3);
                   sum = sum+Number(sliced)*Number(num)
                   localStorage.setItem("total", JSON.stringify(sum))
               }
               var show = document.getElementsByClassName("h4TagP")[0]
               var show1 = document.getElementsByClassName("h4TagP")[1]
               show.innerHTML=`INR${sum}.00` 
               show1.innerHTML=`INR${sum}.00` 
               console.log(sum)
               
        }

        document.getElementById("checkbtn").addEventListener("click", function(){
            window.location.href = "checkout.html"
        })

        var username = JSON.parse(localStorage.getItem("username"))
    if(username.length>0){
        document.getElementById("username").textContent = username
    }
</script>